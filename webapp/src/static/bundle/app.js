require=function t(e,n,r){function i(a,u){if(!n[a]){if(!e[a]){var s="function"==typeof require&&require;if(!u&&s)return s(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[a]={exports:{}};e[a][0].call(c.exports,function(t){var n=e[a][1][t];return i(n||t)},c,c.exports,t,e,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(t,e,n){!function(t){"use strict";function e(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function n(t){return"string"!=typeof t&&(t=String(t)),t}function r(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return b.iterable&&(e[Symbol.iterator]=function(){return e}),e}function i(t){this.map={},t instanceof i?t.forEach(function(t,e){this.append(e,t)},this):Array.isArray(t)?t.forEach(function(t){this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function o(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function a(t){return new Promise(function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function u(t){var e=new FileReader,n=a(e);return e.readAsArrayBuffer(t),n}function s(t){var e=new FileReader,n=a(e);return e.readAsText(t),n}function l(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}function c(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function f(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,t)if("string"==typeof t)this._bodyText=t;else if(b.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(b.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(b.searchParams&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(b.arrayBuffer&&b.blob&&w(t))this._bodyArrayBuffer=c(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!b.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t)&&!_(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=c(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):b.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},b.blob&&(this.blob=function(){var t=o(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?o(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(u)}),this.text=function(){var t=o(this);if(t)return t;if(this._bodyBlob)return s(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(l(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},b.formData&&(this.formData=function(){return this.text().then(h)}),this.json=function(){return this.text().then(JSON.parse)},this}function d(t){var e=t.toUpperCase();return g.indexOf(e)>-1?e:t}function p(t,e){var n=(e=e||{}).body;if(t instanceof p){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new i(t.headers)),this.method=t.method,this.mode=t.mode,n||null==t._bodyInit||(n=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new i(e.headers)),this.method=d(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function h(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var n=t.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(i))}}),e}function v(t){var e=new i;return t.split(/\r?\n/).forEach(function(t){var n=t.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();e.append(r,i)}}),e}function y(t,e){e||(e={}),this.type="default",this.status="status"in e?e.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new i(e.headers),this.url=e.url||"",this._initBody(t)}if(!t.fetch){var b={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};if(b.arrayBuffer)var m=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],w=function(t){return t&&DataView.prototype.isPrototypeOf(t)},_=ArrayBuffer.isView||function(t){return t&&m.indexOf(Object.prototype.toString.call(t))>-1};i.prototype.append=function(t,r){t=e(t),r=n(r);var i=this.map[t];this.map[t]=i?i+","+r:r},i.prototype.delete=function(t){delete this.map[e(t)]},i.prototype.get=function(t){return t=e(t),this.has(t)?this.map[t]:null},i.prototype.has=function(t){return this.map.hasOwnProperty(e(t))},i.prototype.set=function(t,r){this.map[e(t)]=n(r)},i.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},i.prototype.keys=function(){var t=[];return this.forEach(function(e,n){t.push(n)}),r(t)},i.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),r(t)},i.prototype.entries=function(){var t=[];return this.forEach(function(e,n){t.push([n,e])}),r(t)},b.iterable&&(i.prototype[Symbol.iterator]=i.prototype.entries);var g=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];p.prototype.clone=function(){return new p(this,{body:this._bodyInit})},f.call(p.prototype),f.call(y.prototype),y.prototype.clone=function(){return new y(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new i(this.headers),url:this.url})},y.error=function(){var t=new y(null,{status:0,statusText:""});return t.type="error",t};var O=[301,302,303,307,308];y.redirect=function(t,e){if(-1===O.indexOf(e))throw new RangeError("Invalid status code");return new y(null,{status:e,headers:{location:t}})},t.Headers=i,t.Request=p,t.Response=y,t.fetch=function(t,e){return new Promise(function(n,r){var i=new p(t,e),o=new XMLHttpRequest;o.onload=function(){var t={status:o.status,statusText:o.statusText,headers:v(o.getAllResponseHeaders()||"")};t.url="responseURL"in o?o.responseURL:t.headers.get("X-Request-URL");var e="response"in o?o.response:o.responseText;n(new y(e,t))},o.onerror=function(){r(new TypeError("Network request failed"))},o.ontimeout=function(){r(new TypeError("Network request failed"))},o.open(i.method,i.url,!0),"include"===i.credentials&&(o.withCredentials=!0),"responseType"in o&&b.blob&&(o.responseType="blob"),i.headers.forEach(function(t,e){o.setRequestHeader(e,t)}),o.send(void 0===i._bodyInit?null:i._bodyInit)})},t.fetch.polyfill=!0}}("undefined"!=typeof self?self:this)},{}],2:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=r(t("framework/viewport")),o=r(t("framework/router")),a=r(t("framework/config")),u=r(t("./view/home")),s=r(t("./routers"));window.APP={},$((APP.viewport=i.default,APP.router=o.default,void(a.default.isActiveRouter?o.default.start(s.default):i.default.fly(u.default))))},{"./routers":12,"./view/home":23,"framework/config":4,"framework/router":9,"framework/viewport":11}],3:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.fadeIn=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};anime(Object.assign({targets:t,opacity:1,easing:"easeInOutQuad"},e))},n.fadeOut=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};anime(Object.assign({targets:t,opacity:0,easing:"easeInOutQuad"},e))},n.slideRightIn=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};anime({targets:t,easing:"easeInOutQuad",translateX:[{value:20,delay:0},{value:0,duration:e.duration}],opacity:[{value:0,delay:0},{value:1,duration:e.duration}],duration:e.duration,complete:e.complete})},n.slideLeftIn=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};anime({targets:t,easing:"easeInOutQuad",translateX:[{value:-20},{value:0,duration:e.duration}],opacity:[{value:0},{value:1,duration:e.duration}],duration:e.duration,complete:e.complete})},n.slideUpIn=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};anime({targets:t,easing:"easeInOutQuad",translateY:[{value:20,delay:0},{value:0,duration:e.duration}],opacity:[{value:0,delay:0},{value:1,duration:e.duration}],duration:e.duration,complete:e.complete})},n.slideDownOut=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};anime({targets:t,easing:"easeInOutQuad",translateY:[{value:0},{value:20,duration:e.duration}],opacity:[{value:1},{value:0,duration:e.duration}],duration:e.duration,complete:e.complete})}},{}],4:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={isActiveRouter:!0,pushState:!0,defaultAnimation:"none"}},{}],5:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=t("../../anime"),a=function(){function t(e,n){r(this,t),this.currentView=e,this.targetView=n}return i(t,[{key:"push",value:function(e){this.currentView&&(0,o.fadeOut)(this.currentView.$el.get(0),{duration:t.duration}),this.targetView.render(),(0,o.fadeIn)(this.targetView.$el.get(0),{duration:t.duration,complete:e})}},{key:"pop",value:function(e){this.currentView&&(0,o.fadeOut)(this.currentView.$el.get(0),{duration:t.duration}),(0,o.fadeIn)(this.targetView.$el.get(0),{duration:t.duration,complete:e})}}]),t}();a.type="fade",a.duration=320,n.default=a},{"../../anime":3}],6:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(){function t(e,n){r(this,t),this.currentView=e,this.targetView=n}return i(t,[{key:"push",value:function(t){this.currentView&&this.currentView.$el.css({display:"none",opacity:0}),this.targetView.render(),this.targetView.$el.css({display:"block",opacity:1}),t&&t()}},{key:"pop",value:function(t){this.currentView.$el.css({display:"none",opacity:0}),this.targetView.$el.css({display:"block",opacity:1}),t&&t()}}]),t}();o.type="none",n.default=o},{}],7:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=t("../../anime"),a=function(){function t(e,n){r(this,t),this.currentView=e,this.targetView=n}return i(t,[{key:"push",value:function(e){this.currentView&&(0,o.fadeOut)(this.currentView.$el.get(0),{duration:t.duration+120}),this.targetView.render(),(0,o.slideRightIn)(this.targetView.$el.get(0),{duration:t.duration,complete:e})}},{key:"pop",value:function(e){this.currentView&&(0,o.fadeOut)(this.currentView.$el.get(0),{duration:t.duration+120}),(0,o.slideLeftIn)(this.targetView.$el.get(0),{duration:t.duration,complete:e})}}]),t}();a.type="slide-h",a.duration=320,n.default=a},{"../../anime":3}],8:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=t("../../anime"),a=function(){function t(e,n){r(this,t),this.currentView=e,this.targetView=n}return i(t,[{key:"push",value:function(e){var n=this;this.targetView.render(),(0,o.slideUpIn)(this.targetView.$el.get(0),{duration:t.duration,complete:function(){n.currentView&&n.currentView.$el.css({opacity:0,display:"none"}),e&&e()}})}},{key:"pop",value:function(e){this.targetView.$el.css({opacity:1,display:"block"}),this.currentView&&(0,o.slideDownOut)(this.currentView.$el.get(0),{duration:t.duration,complete:e})}}]),t}();a.type="slide-v",a.duration=320,n.default=a},{"../../anime":3}],9:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o=r(t("./viewport")),a=r(t("./transition")),u=r(t("./config")),s={start:function(t){var e=Backbone.Router.extend(i({},t,{nav:function(t,e,n,r){void 0===r&&(r=!0),(e=e||{}).__animation__=n||a.default.defaultAnimation,this.params=e,this.navigate(t,{trigger:r})}}));return this.appRouter=new e,Backbone.history.start({pushState:u.default.pushState,root:"/"}),this},nav:function(t,e,n,r){this.appRouter.nav(t,e,n,r)},fly:function(t,e){e=e||{},Object.assign(e,this.appRouter.params||{}),o.default.fly(t,e),this.appRouter.params=null}};n.default=s},{"./config":4,"./transition":10,"./viewport":11}],10:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(t("./config")),o=r(t("./plugin/transition/NoneTransition")),a=r(t("./plugin/transition/FadeTransition")),u=r(t("./plugin/transition/SlideHorizontalTransition")),s=r(t("./plugin/transition/SlideVerticalTransition")),l={defaultAnimation:i.default.defaultAnimation,get:function(t,e,n){var r=void 0,i=n;switch(_.isObject(n)&&(i=n.type),i){case"fade":r=new a.default(t,e);break;case"slide-h":r=new u.default(t,e);break;case"slide-v":r=new s.default(t,e);break;default:r=new o.default(t,e)}return r}};n.default=l},{"./config":4,"./plugin/transition/FadeTransition":5,"./plugin/transition/NoneTransition":6,"./plugin/transition/SlideHorizontalTransition":7,"./plugin/transition/SlideVerticalTransition":8}],11:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(){var t=c.length;return 0===t?null:c[t-1].value}function o(t){return l.default.isActiveRouter?location.pathname:t}function a(t){for(var e=void 0,n=0;n<c.length;n++){var r=c[n];if(r.key===o(t)){e=r;break}}return e}Object.defineProperty(n,"__esModule",{value:!0});var u=r(t("./transition")),s=r(t("./router")),l=r(t("./config")),c=[],f=void 0,d={fly:function(t,e){(e=e||{}).__animation__||(e.__animation__=u.default.defaultAnimation),f&&f.dismiss();var n=c.length;if(0===n)this.push(t,e);else{var r=a(t);if(r)if(c[n-1].key===o(t))this.replace(t,e);else{if(1===n)throw new Error("cache size incorrect");c[n-2].key===o(t)?this.pop(e):this.popTo(r.key,e)}else this.push(t,e)}},push:function(t,e){var n=new t(e),r=i(),a=e.__animation__,f=u.default.get(r,n,a);r&&r.viewWillDisappear(),f.push(function(){n.__animation__=e.__animation__,l.default.isActiveRouter&&(n.router=s.default.appRouter),c.push({key:o(t),value:n}),n.viewDidAppear()})},replace:function(t,e){var n=c.length,r=new t(e),a=i(),f=u.default.get(a,r);a.viewWillDisappear(),f.push(function(){r.__animation__=e.__animation__,l.default.isActiveRouter&&(r.router=s.default.appRouter),a.remove(),c.splice(n-1,1),c.push({key:o(t),value:r}),r.viewDidAppear()})},pop:function(){var t=c.length,e=i();if(!e)throw new Error("no view to pop");if(t<=1)throw new Error("cache size incorrect");var n=c[t-2].value,r=e.__animation__;e.viewWillDisappear(),u.default.get(e,n,r).pop(function(){e.remove(),c.splice(t-1,1),n.viewDidAppear()})},popTo:function(t){var e=a(t);if(!e)throw new Error("target view not found");var n=c.length,r=i();if(!r)throw new Error("no view to pop");if(n<=1)throw new Error("cache size incorrect");var o=e.value,s=r.__animation__;r.viewWillDisappear(),u.default.get(r,o,s).pop(function(){for(var t=c.indexOf(e),r=t+1;r<n;r++)c[r].value.remove();c.splice(t+1,n-1),o.viewDidAppear()})},index:function(){var t=c.length;t>1&&c.splice(0,t-1)},setActiveModal:function(t){f=t}};n.default=d},{"./config":4,"./router":9,"./transition":10}],12:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(t("./framework/router")),o=r(t("./view/home/home")),a=r(t("./view/cart/cart")),u={routes:{"":"toHome",cart:"toCart"},toHome:function(){i.default.fly(o.default)},toCart:function(){i.default.fly(a.default)}};n.default=u},{"./framework/router":9,"./view/cart/cart":21,"./view/home/home":23}],13:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r="local-cart",i={count:function(){var t=localStorage.getItem(r);if(t){t=JSON.parse(t);var e=Object.keys(t),n=0,i=!0,o=!1,a=void 0;try{for(var u,s=e[Symbol.iterator]();!(i=(u=s.next()).done);i=!0)n+=1*t[u.value].count}catch(t){o=!0,a=t}finally{try{!i&&s.return&&s.return()}finally{if(o)throw a}}return n}return 0},get:function(){var t=localStorage.getItem(r);t=t?JSON.parse(t):[];var e=Object.keys(t),n=[],i=!0,o=!1,a=void 0;try{for(var u,s=e[Symbol.iterator]();!(i=(u=s.next()).done);i=!0){var l=u.value;n.push(t[l])}}catch(t){o=!0,a=t}finally{try{!i&&s.return&&s.return()}finally{if(o)throw a}}return n},increase:function(t){var e=localStorage.getItem(r);return(e=e?JSON.parse(e):{})[t.id]?t.count=1*e[t.id].count+1:t.count=1,e[t.id]=t,localStorage.setItem(r,JSON.stringify(e)),!0},decrease:function(t){var e=localStorage.getItem(r);if((e=e?JSON.parse(e):{})[t.id]){var n=1*e[t.id].count-1;return n<=0?(t.count=0,delete e[t.id]):(t.count=n,e[t.id]=t),localStorage.setItem(r,JSON.stringify(e)),!0}return!1}};n.default=i},{}],14:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=r(t("../../framework/config")),c=r(t("../../view/cart")),f=r(t("..//cart-store")),d=function(t){function e(){i(this,e);var t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{className:"cart-overlay",events:{"click .inner":"onClick"}}));return t.template=_.template('<div class="inner">\n\t\t\t\t<i class="iconfont icon-cart"/>\n\t\t\t\t<div class="badge"><%=count%></div>\n\t\t\t</div>'),t}return a(e,Backbone.View),u(e,[{key:"render",value:function(){return s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"render",this).call(this),this.$el.html(this.template({count:f.default.count()})),this}},{key:"refresh",value:function(){var t=f.default.count(),e=this.$el.find(".badge");t>9?e.text("9+"):e.text(t)}},{key:"onClick",value:function(){l.default.isActiveRouter?APP.router.nav("cart"):APP.viewport.fly(c.default)}}]),e}();n.default=d},{"../../framework/config":4,"../../view/cart":21,"..//cart-store":13}],15:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(){function t(e){r(this,t),this.callback=e}return i(t,[{key:"send",value:function(t,e){this.callback&&this.callback(t,e)}}]),t}();n.default=o},{}],16:[function(t,e,n){"use strict";function r(t){return t.startsWith("http://")||t.startsWith("https://")?t:t+=(-1!==t.indexOf("?")?"&":"?")+"__v=1"}function i(t,e){return fetch(t,e).then(function(t){return t.json()})}function o(t,e,n){n=n||{},e=r(e);var o={},a=Object.keys(n).map(function(t){return t+"="+encodeURIComponent(n[t])}).join("&"),u={headers:o,method:t};return"GET"===t?a&&(e=e+"&"+a):(u.headers["Content-Type"]="application/x-www-form-urlencoded",u.body=a),i(e,u)}function a(t,e,n,o){e=r(e);var a=new FormData;for(var u in n)n.hasOwnProperty(u)&&a.append(u,n[u]);if(o)for(var s=0;s<o.length;s++){var l=o[s];a.append(s+"-"+l.name,l)}return i(e,{method:t,credentials:"include",body:a})}Object.defineProperty(n,"__esModule",{value:!0}),t("whatwg-fetch"),n.default={get:function(t){return o("GET",t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})},delete:function(t){return o("DELETE",t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})},post:function(t){return o("POST",t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})},upload:function(t){return a("POST",t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},arguments[2])},put:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};arguments[2];return o("PUT",t,e)}}},{"whatwg-fetch":1}],17:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},s=function(t){return t&&t.__esModule?t:{default:t}}(t("modal"));n.default={show:function(t,e){(e=e||{}).title=t,new l(e).show()}};var l=function(t){function e(t){r(this,e),t.className="ui-confirm",t.events={"click .button-cancel":"onCancel","click .button-confirm":"onConfirm"};var n=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,Object.assign({},e.defaults,t)));return n.template=_.template('<div class="inner">\n\t\t\t\t<div class="title"><%=title%></div>\n\t\t\t\t<div class="content"><%=content%></div>\n\t\t\t\t<div class="buttons">\n\t\t\t\t\t<div class="button-cancel button button-clear"><%=cancelText%></div>\n\t\t\t\t\t<div class="button-confirm button button-clear"><%=confirmText%></div>\n\t\t\t\t</div>\n\t\t\t</div>'),n}return o(e,s.default),a(e,[{key:"show",value:function(){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"show",this).call(this,this.template({title:this.options.title,content:this.options.content,confirmText:this.options.confirmText,cancelText:this.options.cancelText}))}},{key:"onCancel",value:function(){this.dismiss(),this.options.onSelect&&this.options.onSelect(0)}},{key:"onConfirm",value:function(){this.dismiss(),this.options.onSelect&&this.options.onSelect(1)}}]),e}();l.defaults={dismissOnBlur:!1,confirmText:"Confirm",cancelText:"Cancel",onSelect:null}},{modal:"modal"}],18:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(t){return t&&t.__esModule?t:{default:t}}(t("../http")),a=function(){function t(e){r(this,t);var n={url:"",autoScroll:!0,limit:20,delay:280,params:{},footerLoadingText:"Loading...",footerMoreText:"Load More",footerClickText:"Click To Load More"};if(!(e=Object.assign({},n,e)).url)throw new Error("must set url to infinite");this.skip=null,this.isBusy=!1,this.isCompleted=!1,this.options=e}return i(t,[{key:"render",value:function(t){t.addClass("infinite"),this.loadMoreBar=new u({footerLoadingText:this.options.footerLoadingText,footerMoreText:this.options.footerMoreText,footerClickText:this.options.footerClickText,onClick:this.load.bind(this)}),this.loadMoreBar.render(t),this.options.autoScroll&&t.scroll(this.onScroll.bind(this)),this.load()}},{key:"load",value:function(){var t=this;if(!this.isBusy){var e=this.options.params||{};e.skip=this.skip,e.limit=this.options.limit,this.isBusy=!0,this.loadMoreBar.loading(),o.default.get(this.options.url,e).then(function(e){if(200!==e.status)t.loadMoreBar.tip();else{var n=e.body,r=n.data;!n.pagination.after||r.length<t.options.limit?(t.loadMoreBar.hide(),t.isCompleted=!0):(t.loadMoreBar.reset(),t.skip=n.pagination.after),t.options.onDataReceived&&t.options.onDataReceived(r)}t.isBusy=!1}).catch(function(){t.loadMoreBar.tip(),t.isBusy=!1})}}},{key:"onScroll",value:function(t){var e=this,n=$(t.target);n.scrollTop()+n.height()>=n.prop("scrollHeight")&&!this.isBusy&&!this.isCompleted&&(this.loadMoreBar.loading(),setTimeout(function(){e.load()},this.options.delay))}}]),t}(),u=function(){function t(e){r(this,t),this.footerLoadingText=e.footerLoadingText,this.footerMoreText=e.footerMoreText,this.footerClickText=e.footerClickText,this.onClick=e.onClick}return i(t,[{key:"render",value:function(t){return this.$el=$(document.createElement("div")),this.$el.addClass("load-more-bar").html('<i class="spinner iconfont icon-loading"/>&nbsp;\n            <div class="text">&nbsp;</div>'),t.append(this.$el),this.hide(),this.$el.click(this.onClick),this}},{key:"loading",value:function(){this.$el.show(),this.$el.find(".spinner").show(),this.$el.find(".text").text(this.footerLoadingText)}},{key:"hide",value:function(){this.$el.find(".text").text(this.footerMoreText),this.$el.hide()}},{key:"reset",value:function(){this.$el.show(),this.$el.find(".spinner").hide(),this.$el.find(".text").text(this.footerMoreText)}},{key:"tip",value:function(){this.$el.show(),this.$el.find(".spinner").hide(),this.$el.find(".text").text(this.footerClickText)}}]),t}();n.default=a},{"../http":16}],19:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function(t){return t&&t.__esModule?t:{default:t}}(t("script/cart-store")),s=function(t){function e(t,n){r(this,e);var o=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{tagName:"li",className:"cart-item",events:{"click .icon-reduce":"onReduce","click .icon-add":"onAdd"}}));return o.template=_.template('<div class="inner">\n                <div class="thumbnail" style="background-image: url(<%=thumbnail%>);"></div>\n                <div class="info">\n                    <div class="name"><%=title%></div>\n            \n                    <div class="action">\n                        <div class="price">\n                            <span class="unit">$</span>\n                            <span class="text"><%=price%></span>\n                        </div>\n                        <div class="options">\n                            <div class="option iconfont icon-reduce"></div>\n                            <div class="total">x <span><%=count%></span></div>\n                            <div class="option iconfont icon-add" style="margin-top: 6px;"></div>\n                        </div>\n                    </div>\n                </div>\n            </div>'),o.data=t,o.handler=n,o}return o(e,Backbone.View),a(e,[{key:"render",value:function(){return this.$el.html(this.template(this.data)),this}},{key:"onReduce",value:function(){this.data.count-1<0||(u.default.decrease(this.data)&&this.$el.find(".action .options .total span").text(this.data.count),this.handler.send(1e3))}},{key:"onAdd",value:function(){u.default.increase(this.data)&&this.$el.find(".action .options .total span").text(this.data.count),this.handler.send(1e3)}}]),e}();n.default=s},{"script/cart-store":13}],20:[function(require,module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="wrapper">\n\t<div class="title-bar">\n\t\t<i class="iconfont icon-back"/>\n\t\t<div class="title">Shopping Cart</div>\n\t</div>\n\n\t<div class="user-box">\n\t\t<div class="avatar" style="background-image: url(/static/image/avatar.jpg);"></div>\n\t\t<div class="name">Fedor.Jia</div>\n\t</div>\n\n\t',productAmount>0?__p+='\n\t\t<ul class="items"></ul>\n\n\t\t<ul class="amount-box">\n\t\t\t<li>\n\t\t\t\t<div class="label">Product Amount</div>\n\t\t\t\t<div class="value product-amount">$ '+(null==(__t=productAmount)?"":__t)+'</div>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<div class="label">Freight</div>\n\t\t\t\t<div class="value">$ '+(null==(__t=freight)?"":__t)+"</div>\n\t\t\t</li>\n\t\t</ul>\n\t":__p+='\n\t\t<div class="empty-tip">Nothing ...</div>\n\t',__p+="\n</div>\n\n",productAmount>0&&(__p+='\n<div class="footer-box">\n\t<div class="total-amount">Total Amount: $ <span>'+(null==(__t=amount)?"":__t)+'</span></div>\n\t<div class="btn-buy">Pay</div>\n</div>\n'),__p+="\n";return __p}},{}],21:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=r(t("framework/config")),c=r(t("component")),f=r(t("script/handler")),d=r(t("./cart.html")),p=r(t("script/cart-store")),h=r(t("./cart-item")),v=r(t("script/widget/confirm")),y=function(t){function e(){i(this,e);var t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{className:"cart-view",events:{"click .icon-back":"onBack","click .btn-buy":"onBuy"}}));return t.freight=5,t.hander=new f.default(t.onMsgReceived.bind(t)),t}return a(e,c.default),u(e,[{key:"viewWillDisappear",value:function(){}},{key:"viewDidAppear",value:function(){}},{key:"render",value:function(){return s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"render",this).call(this),this.loadData(),this}},{key:"loadData",value:function(){this.setup(p.default.get())}},{key:"setup",value:function(t){var e=0,n=!0,r=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var u=o.value;e+=u.count*u.price}}catch(t){r=!0,i=t}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}this.$el.html((0,d.default)({productAmount:e,freight:this.freight,amount:e+this.freight}));var s=this.$el.find(".items"),l=!0,c=!1,f=void 0;try{for(var p,v=t[Symbol.iterator]();!(l=(p=v.next()).done);l=!0){var y=p.value,b=new h.default(y,this.hander);s.append(b.render().el)}}catch(t){c=!0,f=t}finally{try{!l&&v.return&&v.return()}finally{if(c)throw f}}}},{key:"refreshAmounts",value:function(){var t=p.default.get(),e=0,n=!0,r=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var u=o.value;e+=u.count*u.price}}catch(t){r=!0,i=t}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}var s=this.$el.find(".amount-box .product-amount"),l=this.$el.find(".footer-box .total-amount span");s.text(e),l.text(e+this.freight)}},{key:"onMsgReceived",value:function(t,e){switch(t){case 1e3:this.refreshAmounts()}}},{key:"onBack",value:function(){l.default.isActiveRouter?history.go(-1):APP.viewport.pop()}},{key:"onBuy",value:function(){p.default.get().length>0&&v.default.show("Pay",{content:"Pay for this shopping, Are you sure?",onSelect:function(t){}})}}]),e}();n.default=y},{"./cart-item":19,"./cart.html":20,component:"component","framework/config":4,"script/cart-store":13,"script/handler":15,"script/widget/confirm":17}],22:[function(require,module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="wrapper">\n    <ul class="items"></ul>\n</div>\n';return __p}},{}],23:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=r(t("component")),c=r(t("script/handler")),f=r(t("script/widget/infinite")),d=r(t("./home.html")),p=r(t("./product-item")),h=r(t("../../script/component/cart-overlay")),v=function(t){function e(){i(this,e);var t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{className:"home-view",events:{}}));return t.hander=new c.default(t.onMsgReceived.bind(t)),t.infinite=new f.default({url:"/api/list",limit:10,onDataReceived:t.setup.bind(t)}),t.cartOverlay=new h.default,t}return a(e,l.default),u(e,[{key:"viewDidAppear",value:function(){APP.viewport.index(),this.cartOverlay.refresh()}},{key:"render",value:function(){return s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"render",this).call(this),this.$el.html((0,d.default)()),this.infinite.render(this.$el.find(".wrapper")),this.$el.append(this.cartOverlay.render().el),this}},{key:"setup",value:function(t){var e=this.$el.find(".items"),n=!0,r=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var u=o.value,s=new p.default(u,this.hander);e.append(s.render().el)}}catch(t){r=!0,i=t}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}}},{key:"onMsgReceived",value:function(t,e){switch(t){case 1e3:this.cartOverlay.refresh()}}}]),e}();n.default=v},{"../../script/component/cart-overlay":14,"./home.html":22,"./product-item":24,component:"component","script/handler":15,"script/widget/infinite":18}],24:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function(t){return t&&t.__esModule?t:{default:t}}(t("script/cart-store")),s=function(t){function e(t,n){r(this,e);var o=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{tagName:"li",className:"product-item",events:{"click .icon-reduce":"onReduce","click .icon-add":"onAdd"}}));return o.template=_.template('<div class="item-inner">\n                <div class="thumbnail cover" style="background-image:url(<%=thumbnail%>)"></div>\n                <div class="name"><%=title%></div>\n            \n                <div class="footer-box">\n                    <div class="price">\n                        <span class="unit">$</span>\n                        <span class="text"><%=price%></span>\n                    </div>\n                    <div class="options">\n                        <div class="option iconfont icon-reduce"></div>\n                        <div class="option iconfont icon-add" style="margin-top: 4px;"></div>\n                    </div>\n                </div>\n            </div>'),o.data=t,o.handler=n,o}return o(e,Backbone.View),a(e,[{key:"render",value:function(){return this.$el.html(this.template(this.data)),this}},{key:"onReduce",value:function(){u.default.decrease(this.data)&&this.handler.send(1e3)}},{key:"onAdd",value:function(){u.default.increase(this.data)&&this.handler.send(1e3)}}]),e}();n.default=s},{"script/cart-store":13}],component:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,Backbone.View),a(e,[{key:"render",value:function(){return this.$el.addClass("view"),$("body").append(this.$el),this}},{key:"viewDidAppear",value:function(){}},{key:"viewWillDisappear",value:function(){}},{key:"remove",value:function(){this.$el.remove()}}]),e}();n.default=u},{}],modal:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function(t){return t&&t.__esModule?t:{default:t}}(t("../viewport")),s=function(t){function e(t){r(this,e);var n=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.options=Object.assign({},e.defaults,t),n.render(),n}return o(e,Backbone.View),a(e,[{key:"didAppear",value:function(){}},{key:"willDisappear",value:function(){}},{key:"render",value:function(){var t=this.$el,e=$(document.createElement("div"));return t.addClass("modal-overlay"),e.addClass("modal"),this.$el.append(e),this.options.dismissOnBlur&&this.$el.on("click",this.dismiss.bind(this)),this}},{key:"show",value:function(t){var e=this,n=$("body"),r=this.$el.find(".modal");this.$el.show(),r.html(t),n.append(this.$el),"none"===this.options.animation?(this.$el.css({opacity:1}),this.didAppear()):this.$el.velocity(this.options.animation,this.options.duration,function(){e.didAppear()}),u.default.setActiveModal(this)}},{key:"dismiss",value:function(t){var e=this;t&&!$(t.target).hasClass("modal")||(this.willDisappear(),this.$el.velocity("fadeOut",this.options.duration,function(){e.$el.remove()}),u.default.setActiveModal(null))}}]),e}();s.defaults={duration:240,dismissOnBlur:!1,animation:"transition.fadeIn"},n.default=s},{"../viewport":11}]},{},[2]);